{"version":3,"file":"formulize.es5.js","sources":["../src/ui/ui.helper.ts","../src/option.value.ts","../src/key.enum.ts","../src/key.helper.ts","../src/helper.ts","../node_modules/metric-parser/dist/metric.parser.es5.js","../src/formulize.value.ts","../src/ui/ui.base.ts","../src/ui/ui.ts","../src/formulize.ts"],"sourcesContent":["import { Position } from './ui.interface';\n\nexport class UIHelper {\n    public static getDataValue(elem: HTMLElement): string {\n        const jQueryElem = $(elem);\n        const value = jQueryElem.data('value');\n        return value !== undefined\n            ? value\n            : $(elem).text();\n    }\n\n    public static isOverDistance(position: Position, targetPosition: Position, distance: number): boolean {\n        return Math.abs(position.x - targetPosition.x) <= distance &&\n        Math.abs(position.y - targetPosition.y) <= distance;\n    }\n\n    public static getDragElement(id: string): HTMLElement {\n        return $(`<div class=\"${id}-drag\"></div>`)[0];\n    }\n\n    public static getCursorElement(id: string): HTMLElement {\n        return $(`<div class=\"${id}-cursor\"></div>`)[0];\n    }\n}\n","import { UIHelper } from './ui/ui.helper';\nimport { FormulizeOptions } from './formulize.interface';\n\nexport const defaultOptions: FormulizeOptions = {\n    id: 'formulize',\n    cursor: {\n        time: {\n            animate: 160,\n            delay: 500\n        }\n    },\n    text: {\n        formula: 'formula',\n        error: 'error',\n        pass: 'passed'\n    },\n    export: (elem: HTMLElement) => UIHelper.getDataValue(elem)\n};\n","export enum Key {\n    Backspace = 8,\n    Tab = 9,\n    Enter = 13,\n    Shift = 16,\n    Ctrl = 17,\n    Alt = 18,\n    PauseBreak = 19,\n    CapsLock = 20,\n    Escape = 27,\n    Space = 32,\n    PageUp = 33,\n    PageDown = 34,\n    End = 35,\n    Home = 36,\n\n    LeftArrow = 37,\n    UpArrow = 38,\n    RightArrow = 39,\n    DownArrow = 40,\n\n    Insert = 45,\n    Delete = 46,\n\n    Zero = 48,\n    ClosedParen = Zero,\n    One = 49,\n    ExclamationMark = One,\n    Two = 50,\n    AtSign = Two,\n    Three = 51,\n    PoundSign = Three,\n    Hash = PoundSign,\n    Four = 52,\n    DollarSign = Four,\n    Five = 53,\n    PercentSign = Five,\n    Six = 54,\n    Caret = Six,\n    Hat = Caret,\n    Seven = 55,\n    Ampersand = Seven,\n    Eight = 56,\n    Star = Eight,\n    Asterik = Star,\n    Nine = 57,\n    OpenParen = Nine,\n\n    A = 65,\n    B = 66,\n    C = 67,\n    D = 68,\n    E = 69,\n    F = 70,\n    G = 71,\n    H = 72,\n    I = 73,\n    J = 74,\n    K = 75,\n    L = 76,\n    M = 77,\n    N = 78,\n    O = 79,\n    P = 80,\n    Q = 81,\n    R = 82,\n    S = 83,\n    T = 84,\n    U = 85,\n    V = 86,\n    W = 87,\n    X = 88,\n    Y = 89,\n    Z = 90,\n\n    LeftWindowKey = 91,\n    RightWindowKey = 92,\n    SelectKey = 93,\n\n    Numpad0 = 96,\n    Numpad1 = 97,\n    Numpad2 = 98,\n    Numpad3 = 99,\n    Numpad4 = 100,\n    Numpad5 = 101,\n    Numpad6 = 102,\n    Numpad7 = 103,\n    Numpad8 = 104,\n    Numpad9 = 105,\n\n    Multiply = 106,\n    Add = 107,\n    Subtract = 109,\n    DecimalPoint = 110,\n    Divide = 111,\n\n    F1 = 112,\n    F2 = 113,\n    F3 = 114,\n    F4 = 115,\n    F5 = 116,\n    F6 = 117,\n    F7 = 118,\n    F8 = 119,\n    F9 = 120,\n    F10 = 121,\n    F11 = 122,\n    F12 = 123,\n\n    NumLock = 144,\n    ScrollLock = 145,\n\n    SemiColon = 186,\n    Equals = 187,\n    Comma = 188,\n    Dash = 189,\n    Period = 190,\n    UnderScore = Dash,\n    PlusSign = Equals,\n    ForwardSlash = 191,\n    Tilde = 192,\n    GraveAccent = Tilde,\n\n    OpenBracket = 219,\n    ClosedBracket = 221,\n    Quote = 222\n}","import { Key } from './key.enum';\n\nexport class FormulizeKeyHelper {\n    public static isReload(keyCode: number, pressedCtrl: boolean): boolean {\n        return keyCode === Key.F5 || pressedCtrl && keyCode === Key.R;\n    }\n\n    public static isSelectAll(keyCode: number, pressedCtrl: boolean): boolean {\n        return keyCode === Key.A && pressedCtrl;\n    }\n\n    public static isBackspace(keyCode: number): boolean {\n        return keyCode === Key.Backspace;\n    }\n\n    public static isDelete(keyCode: number): boolean {\n        return keyCode === Key.Delete;\n    }\n\n    public static isLeft(keyCode: number): boolean {\n        return keyCode === Key.LeftArrow;\n    }\n\n    public static isUp(keyCode: number): boolean {\n        return keyCode === Key.UpArrow;\n    }\n\n    public static isRight(keyCode: number): boolean {\n        return keyCode === Key.RightArrow;\n    }\n\n    public static isDown(keyCode: number): boolean {\n        return keyCode === Key.DownArrow;\n    }\n\n    public static isHome(keyCode: number): boolean {\n        return keyCode === Key.Home;\n    }\n\n    public static isEnd(keyCode: number): boolean {\n        return keyCode === Key.End;\n    }\n\n    public static doReload(): void {\n        location.reload();\n    }\n\n    public static doAction<T>(action: () => T): () => T {\n        return action;\n    }\n}\n","import { Key } from './key.enum';\n\nexport class Helper {\n    public static toDecimal(value: string): string {\n        const splitValue = value.split('.');\n        const prefix = splitValue[0]\n            .replace(/[^\\d.]*/gi, '')\n            .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        const suffix = (splitValue[1] || '').replace(/[^\\d.]*/gi, '');\n\n        return  [prefix, suffix].join('.');\n    }\n\n    public static getKeyCodeValue(keyCode: number, pressedShift: boolean = false): string {\n        if (keyCode === Key.Multiply)\n            return 'x';\n\n        if (((keyCode === Key.PlusSign || keyCode === 61) && pressedShift) || keyCode === Key.Add)\n            return '+';\n\n        if (keyCode === Key.Dash || keyCode === 173 || keyCode === Key.Subtract)\n            return '-';\n\n        if (keyCode === Key.Period || keyCode === Key.DecimalPoint)\n            return '.';\n\n        if (keyCode === Key.ForwardSlash || keyCode === Key.Divide)\n            return '/';\n\n        return String.fromCharCode(keyCode);\n    }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\n\nvar Token;\r\n(function (Token) {\r\n    var Type;\r\n    (function (Type) {\r\n        Type[Type[\"Unknown\"] = 0] = \"Unknown\";\r\n        Type[Type[\"Value\"] = 1] = \"Value\";\r\n        Type[Type[\"Dot\"] = 2] = \"Dot\";\r\n        Type[Type[\"Operator\"] = 3] = \"Operator\";\r\n        Type[Type[\"Bracket\"] = 4] = \"Bracket\";\r\n        Type[Type[\"Function\"] = 5] = \"Function\";\r\n        Type[Type[\"WhiteSpace\"] = 6] = \"WhiteSpace\";\r\n        Type[Type[\"CompareToken\"] = 7] = \"CompareToken\";\r\n    })(Type = Token.Type || (Token.Type = {}));\r\n    var SubType;\r\n    (function (SubType) {\r\n        SubType[SubType[\"Group\"] = 0] = \"Group\";\r\n    })(SubType = Token.SubType || (Token.SubType = {}));\r\n    Token.literal = {\r\n        Addition: '+',\r\n        Subtraction: '-',\r\n        Multiplication: '*',\r\n        MultiplicationLiteral: 'x',\r\n        Division: '/',\r\n        Mod: '%',\r\n        Pow: '^',\r\n        BracketOpen: '(',\r\n        BracketClose: ')',\r\n        Dot: '.'\r\n    };\r\n    Token.addition = [Token.literal.Addition];\r\n    Token.subtraction = [Token.literal.Subtraction];\r\n    Token.multiplication = [Token.literal.Multiplication, Token.literal.MultiplicationLiteral];\r\n    Token.division = [Token.literal.Division];\r\n    Token.mod = [Token.literal.Mod];\r\n    Token.pow = [Token.literal.Pow];\r\n    Token.bracketOpen = Token.literal.BracketOpen;\r\n    Token.bracketClose = Token.literal.BracketClose;\r\n    Token.bracket = [Token.bracketOpen, Token.bracketClose];\r\n    Token.precedence = Token.addition.concat(Token.subtraction, Token.multiplication, Token.division, Token.pow, Token.mod, Token.bracket);\r\n    Token.operators = Token.addition.concat(Token.subtraction, Token.multiplication, Token.division, Token.mod, Token.pow);\r\n    Token.symbols = Token.operators.concat(Token.bracket);\r\n    Token.whiteSpace = [\r\n        ' ',\r\n        '',\r\n        null,\r\n        undefined,\r\n    ];\r\n})(Token || (Token = {}));\n\nvar TokenTypeHelper = /** @class */ (function () {\r\n    function TokenTypeHelper() {\r\n    }\r\n    TokenTypeHelper.isNumeric = function (value) {\r\n        return (/^[\\+\\-]?\\d*\\.?\\d+(?:[Ee][\\+\\-]?\\d+)?$/).test(String(value));\r\n    };\r\n    TokenTypeHelper.isArray = function (token) {\r\n        return Array.isArray(token);\r\n    };\r\n    TokenTypeHelper.isString = function (token) {\r\n        return typeof token === 'string';\r\n    };\r\n    TokenTypeHelper.isObject = function (token) {\r\n        return typeof token === 'object';\r\n    };\r\n    TokenTypeHelper.isValue = function (token) {\r\n        return TokenTypeHelper.isObject(token) || TokenTypeHelper.isNumeric(token);\r\n    };\r\n    return TokenTypeHelper;\r\n}());\n\nvar TokenHelperBase = /** @class */ (function (_super) {\r\n    __extends(TokenHelperBase, _super);\r\n    function TokenHelperBase() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TokenHelperBase.isToken = function (token) {\r\n        var validators = [\r\n            TokenHelperBase.isNumeric,\r\n            TokenHelperBase.isSymbol,\r\n            TokenHelperBase.isObject\r\n        ];\r\n        return token && validators.some(function (validator) { return validator(token); });\r\n    };\r\n    TokenHelperBase.isUnkown = function (token) {\r\n        return token === undefined || token === null;\r\n    };\r\n    TokenHelperBase.isLineEscape = function (token) {\r\n        return token === '\\n';\r\n    };\r\n    TokenHelperBase.isWhiteSpace = function (token) {\r\n        return Token.whiteSpace.includes(String(token));\r\n    };\r\n    TokenHelperBase.isDot = function (token) {\r\n        return token === Token.literal.Dot;\r\n    };\r\n    TokenHelperBase.isAddition = function (token) {\r\n        return Token.addition.includes(token);\r\n    };\r\n    TokenHelperBase.isSubtraction = function (token) {\r\n        return Token.subtraction.includes(token);\r\n    };\r\n    TokenHelperBase.isMultiplication = function (token) {\r\n        return Token.multiplication.includes(token);\r\n    };\r\n    TokenHelperBase.isDivision = function (token) {\r\n        return Token.division.includes(token);\r\n    };\r\n    TokenHelperBase.isMod = function (token) {\r\n        return Token.mod.includes(token);\r\n    };\r\n    TokenHelperBase.isPow = function (token) {\r\n        return Token.pow.includes(token);\r\n    };\r\n    TokenHelperBase.isBracket = function (token) {\r\n        return Token.bracket.includes(token);\r\n    };\r\n    TokenHelperBase.isBracketOpen = function (token) {\r\n        return token === Token.bracketOpen;\r\n    };\r\n    TokenHelperBase.isBracketClose = function (token) {\r\n        return token === Token.bracketClose;\r\n    };\r\n    TokenHelperBase.isSymbol = function (token) {\r\n        return Token.symbols.includes(String(token));\r\n    };\r\n    TokenHelperBase.isOperator = function (token) {\r\n        return Token.operators.includes(String(token));\r\n    };\r\n    return TokenHelperBase;\r\n}(TokenTypeHelper));\n\nvar TokenHelper = /** @class */ (function (_super) {\r\n    __extends(TokenHelper, _super);\r\n    function TokenHelper() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TokenHelper.isHigher = function (source, target) {\r\n        return TokenHelper.getPrecedence(source) - TokenHelper.getPrecedence(target) > 0;\r\n    };\r\n    TokenHelper.induceType = function (token) {\r\n        var typeInducers = [\r\n            { predicate: TokenHelper.isUnkown, type: Token.Type.Unknown },\r\n            { predicate: TokenHelper.isWhiteSpace, type: Token.Type.WhiteSpace },\r\n            { predicate: TokenHelper.isOperator, type: Token.Type.Operator },\r\n            { predicate: TokenHelper.isBracket, type: Token.Type.Bracket },\r\n            { predicate: TokenHelper.isDot, type: Token.Type.Dot },\r\n            { predicate: TokenHelper.isValue, type: Token.Type.Value }\r\n        ];\r\n        var extractedToken = typeInducers.find(function (inducer) { return inducer.predicate(token); });\r\n        return extractedToken\r\n            ? extractedToken.type\r\n            : Token.Type.Unknown;\r\n    };\r\n    TokenHelper.getPrecedence = function (token) {\r\n        return [\r\n            [TokenHelper.isAddition, TokenHelper.isSubtraction],\r\n            [TokenHelper.isMultiplication, TokenHelper.isDivision],\r\n            [TokenHelper.isMod, TokenHelper.isPow],\r\n            [TokenHelper.isBracket]\r\n        ].findIndex(function (predicate) { return predicate.some(function (func) { return func(token); }); });\r\n    };\r\n    return TokenHelper;\r\n}(TokenHelperBase));\n\nvar BuilderHelper = /** @class */ (function () {\r\n    function BuilderHelper() {\r\n    }\r\n    BuilderHelper.isOperand = function (data) {\r\n        return !!data.value;\r\n    };\r\n    BuilderHelper.isTree = function (value) {\r\n        return TokenHelper.isObject(value) && !TokenHelper.isArray(value);\r\n    };\r\n    BuilderHelper.needParse = function (value) {\r\n        return !BuilderHelper.isTree(value);\r\n    };\r\n    BuilderHelper.needUnparse = function (value) {\r\n        return BuilderHelper.isTree(value);\r\n    };\r\n    return BuilderHelper;\r\n}());\n\nvar StringHelper = /** @class */ (function () {\r\n    function StringHelper() {\r\n    }\r\n    StringHelper.format = function (value) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var targetValue = value;\r\n        if (args)\r\n            args.forEach(function (match, index) { return targetValue = StringHelper.replaceArg(index, targetValue, match); });\r\n        return targetValue;\r\n    };\r\n    StringHelper.replaceArg = function (match, target, value) {\r\n        return target.replace(new RegExp(\"\\\\{\" + match + \"\\\\}\", 'g'), value);\r\n    };\r\n    return StringHelper;\r\n}());\n\nvar success = 0;\r\nvar ParserError = /** @class */ (function (_super) {\r\n    __extends(ParserError, _super);\r\n    function ParserError(error) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var _this = _super.call(this) || this;\r\n        _this.error = error;\r\n        Object.setPrototypeOf(_this, ParserError.prototype);\r\n        if (args.length)\r\n            _this.error = __assign({}, _this.error, { text: StringHelper.format.apply(StringHelper, [_this.error.text].concat(args)) });\r\n        _this.code = _this.error.code;\r\n        _this.text = _this.error.text;\r\n        _this.message = _this.text;\r\n        return _this;\r\n    }\r\n    ParserError.prototype.withStack = function (stack) {\r\n        this.parserStack = stack;\r\n        return this;\r\n    };\r\n    ParserError.defaultParserStack = { line: 0, col: 0 };\r\n    return ParserError;\r\n}(Error));\n\nvar Packer = /** @class */ (function () {\r\n    function Packer() {\r\n    }\r\n    Packer.makeData = function (data, code) {\r\n        if (code === void 0) { code = success; }\r\n        return { code: code, data: data };\r\n    };\r\n    Packer.makeError = function (error) {\r\n        return __assign({}, this.makeData(error.text, error.code), { stack: error.parserStack || __assign({}, ParserError.defaultParserStack) });\r\n    };\r\n    return Packer;\r\n}());\n\n/* tslint:disable:max-line-length */\r\nvar BuilderError;\r\n(function (BuilderError) {\r\n    BuilderError.id = 0x0300;\r\n    BuilderError.emptyData = { code: 0x0300, text: 'data is empty' };\r\n})(BuilderError || (BuilderError = {}));\r\n/* tslint:enable:max-line-length */\n\n/* tslint:disable:max-line-length */\r\nvar TokenError;\r\n(function (TokenError) {\r\n    TokenError.id = 0x0100;\r\n    TokenError.invalidToken = { code: 0x0100, text: '`{0}` token is invalid token type' };\r\n    TokenError.invalidTwoOperator = { code: 0x0101, text: 'two operators `{0}`, `{1}` can not come together' };\r\n    TokenError.invalidNonNumericValue = { code: 0x0102, text: 'non-numeric token `{0}` can not be consecutive' };\r\n    TokenError.missingOperator = { code: 0x0112, text: 'the operator is missing after `{0}`' };\r\n    TokenError.missingOpenBracket = { code: 0x0120, text: 'missing open bracket, you cannot close the bracket' };\r\n    TokenError.missingCloseBracket = { code: 0x0121, text: 'missing close bracket, the bracket must be closed' };\r\n    TokenError.emptyToken = { code: 0x0150, text: 'token is empty' };\r\n})(TokenError || (TokenError = {}));\r\n/* tslint:enable:max-line-length */\n\nvar AbstractSyntaxTreeNode = /** @class */ (function () {\r\n    function AbstractSyntaxTreeNode(value) {\r\n        if (value)\r\n            this.value = value;\r\n    }\r\n    Object.defineProperty(AbstractSyntaxTreeNode.prototype, \"value\", {\r\n        get: function () {\r\n            return this._value;\r\n        },\r\n        set: function (value) {\r\n            this._value = TokenHelper.isNumeric(value)\r\n                ? Number(value)\r\n                : value;\r\n            this._type = TokenHelper.induceType(this.value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractSyntaxTreeNode.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractSyntaxTreeNode.prototype, \"subType\", {\r\n        get: function () {\r\n            return this._subType;\r\n        },\r\n        set: function (value) {\r\n            this._subType = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractSyntaxTreeNode.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        set: function (value) {\r\n            this._parent = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractSyntaxTreeNode.prototype, \"leftNode\", {\r\n        get: function () {\r\n            return this._leftNode;\r\n        },\r\n        set: function (node) {\r\n            if (!node)\r\n                return;\r\n            this._leftNode = node;\r\n            node.parent = this;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractSyntaxTreeNode.prototype, \"rightNode\", {\r\n        get: function () {\r\n            return this._rightNode;\r\n        },\r\n        set: function (node) {\r\n            if (!node)\r\n                return;\r\n            this._rightNode = node;\r\n            node.parent = this;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AbstractSyntaxTreeNode;\r\n}());\n\nvar AbstractSyntaxTreeBase = /** @class */ (function (_super) {\r\n    __extends(AbstractSyntaxTreeBase, _super);\r\n    function AbstractSyntaxTreeBase() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    AbstractSyntaxTreeBase.prototype.findRoot = function () {\r\n        if (this.isRoot())\r\n            return this.value !== undefined || !this.leftNode\r\n                ? this\r\n                : this.leftNode;\r\n        return this._parent.findRoot();\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.isRoot = function () {\r\n        return !this._parent;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.isValid = function () {\r\n        return this.value && (!this.leftNode && !this.rightNode) || (!!this.leftNode && !!this.rightNode);\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.hasOpenBracket = function () {\r\n        if (TokenHelper.isBracketOpen(this.value))\r\n            return true;\r\n        var leftNodeHasOpenBracket = this.leftNode ? this.leftNode.hasOpenBracket() : false;\r\n        var rightNodeHasOpenBracket = this.rightNode ? this.rightNode.hasOpenBracket() : false;\r\n        return leftNodeHasOpenBracket || rightNodeHasOpenBracket;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.findOpenedBracket = function () {\r\n        if (this.isRoot())\r\n            return undefined;\r\n        if (TokenHelper.isBracketOpen(this._value))\r\n            return this;\r\n        return this._parent.findOpenedBracket();\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.removeRootBracket = function () {\r\n        var rootNode = this.findRoot();\r\n        if (TokenHelper.isBracketOpen(rootNode.value))\r\n            rootNode.leftNode.removeParent();\r\n        return this === rootNode\r\n            ? rootNode.leftNode\r\n            : this;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.removeClosestBracket = function () {\r\n        var node = this.findOpenedBracket();\r\n        if (!node)\r\n            throw new ParserError(TokenError.missingOpenBracket);\r\n        var targetNode = node.leftNode;\r\n        targetNode.subType = Token.SubType.Group;\r\n        if (!node.parent) {\r\n            targetNode.removeParent();\r\n            return targetNode;\r\n        }\r\n        if (node.parent.leftNode === node)\r\n            node.parent.leftNode = targetNode;\r\n        else\r\n            node.parent.rightNode = targetNode;\r\n        return node.parent;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.climbUp = function (token) {\r\n        return this.isClimbTop(token)\r\n            ? this\r\n            : this._parent.climbUp(token);\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.isClimbTop = function (token) {\r\n        return this.isTokenHighest(token) ||\r\n            !this.parent ||\r\n            TokenHelper.isBracketOpen(this.value);\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.isTokenHighest = function (token) {\r\n        return TokenHelper.isHigher(token, this.value) && this.subType !== Token.SubType.Group;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.createChildNode = function (value) {\r\n        var node = new this.constructor(value);\r\n        node.parent = this;\r\n        return node;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.createParentNode = function (value) {\r\n        var node = new this.constructor(value);\r\n        this.parent = node;\r\n        return node;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.insertOperatorNode = function (value) {\r\n        var rootNode = this.climbUp(value);\r\n        if (TokenHelper.isBracketOpen(rootNode.value))\r\n            return rootNode.insertJointNodeToLeft(value);\r\n        if (this.needJointRight(rootNode, value))\r\n            return rootNode.insertJointNodeToRight(value);\r\n        var newNode = rootNode.createParentNode(value);\r\n        newNode.leftNode = rootNode;\r\n        return newNode;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.needJointRight = function (rootNode, value) {\r\n        return rootNode.isTokenHighest(value) && rootNode.parent || this === rootNode;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.insertNode = function (value) {\r\n        if (TokenHelper.isSymbol(value))\r\n            if (!this.value) {\r\n                this.value = value;\r\n                return this;\r\n            }\r\n        if (TokenHelper.isOperator(value))\r\n            return this.insertOperatorNode(value);\r\n        var valueNode = this.createChildNode(value);\r\n        if (!this.leftNode)\r\n            this.leftNode = valueNode;\r\n        else\r\n            this.rightNode = valueNode;\r\n        return valueNode;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.insertJointNodeToLeft = function (value) {\r\n        var jointNode = this.createChildNode(value);\r\n        jointNode.leftNode = this.leftNode;\r\n        jointNode.rightNode = this.rightNode;\r\n        this.leftNode = jointNode;\r\n        return jointNode;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.insertJointNodeToRight = function (value) {\r\n        var jointNode = this.createChildNode(value);\r\n        jointNode.leftNode = this.rightNode;\r\n        this.rightNode = jointNode;\r\n        return jointNode;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.removeLeftNode = function () {\r\n        this._leftNode.removeParent();\r\n        this._leftNode = undefined;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.removeRightNode = function () {\r\n        this._rightNode.removeParent();\r\n        this._rightNode = undefined;\r\n    };\r\n    AbstractSyntaxTreeBase.prototype.removeParent = function () {\r\n        this._parent = undefined;\r\n    };\r\n    return AbstractSyntaxTreeBase;\r\n}(AbstractSyntaxTreeNode));\n\nvar AbstractSyntaxTree = /** @class */ (function (_super) {\r\n    __extends(AbstractSyntaxTree, _super);\r\n    function AbstractSyntaxTree() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(AbstractSyntaxTree.prototype, \"expression\", {\r\n        get: function () {\r\n            return this.makeExpression();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractSyntaxTree.prototype.getParentOperator = function () {\r\n        if (this.isRoot())\r\n            return undefined;\r\n        return this.parent.findOperator();\r\n    };\r\n    AbstractSyntaxTree.prototype.findOperator = function () {\r\n        if (this.type === Token.Type.Operator)\r\n            return this;\r\n        return this.parent.findOperator();\r\n    };\r\n    AbstractSyntaxTree.prototype.makeExpression = function () {\r\n        return this.type === Token.Type.Operator\r\n            ? this.makeOperatorExpression()\r\n            : this.makeValueExpression();\r\n    };\r\n    AbstractSyntaxTree.prototype.makeOperatorExpression = function () {\r\n        var expression = (this.leftNode ? this.leftNode.expression : []).concat([\r\n            this.value\r\n        ], this.rightNode ? this.rightNode.expression : []);\r\n        var parentOperator = this.getParentOperator();\r\n        return parentOperator && TokenHelper.isHigher(parentOperator.value, this.value)\r\n            ? [Token.literal.BracketOpen].concat(expression, [Token.literal.BracketClose]) : expression;\r\n    };\r\n    AbstractSyntaxTree.prototype.makeValueExpression = function () {\r\n        return [this.value];\r\n    };\r\n    return AbstractSyntaxTree;\r\n}(AbstractSyntaxTreeBase));\n\nvar TokenValidateLevel;\r\n(function (TokenValidateLevel) {\r\n    TokenValidateLevel[TokenValidateLevel[\"Pass\"] = 0] = \"Pass\";\r\n    TokenValidateLevel[TokenValidateLevel[\"Escape\"] = 1] = \"Escape\";\r\n    TokenValidateLevel[TokenValidateLevel[\"Fatal\"] = 2] = \"Fatal\";\r\n})(TokenValidateLevel || (TokenValidateLevel = {}));\r\nvar TokenValidator = /** @class */ (function () {\r\n    function TokenValidator() {\r\n    }\r\n    TokenValidator.validateToken = function (token) {\r\n        var level = TokenValidator.extractTokenLevel(token);\r\n        if (level === TokenValidateLevel.Fatal)\r\n            return new ParserError(TokenError.invalidToken, token);\r\n    };\r\n    TokenValidator.validateValueToken = function (token, prevToken) {\r\n        if (!prevToken)\r\n            return undefined;\r\n        if (TokenHelper.isValue(prevToken))\r\n            return new ParserError(TokenError.missingOperator, prevToken);\r\n        if (!TokenHelper.isBracketOpen(prevToken) && !TokenHelper.isOperator(prevToken))\r\n            return new ParserError(TokenError.missingOperator, prevToken);\r\n    };\r\n    TokenValidator.extractTokenLevel = function (token) {\r\n        var levelExtractors = [\r\n            { predicate: TokenHelper.isUnkown, level: TokenValidateLevel.Fatal },\r\n            { predicate: TokenHelper.isToken, level: TokenValidateLevel.Pass }\r\n        ];\r\n        var extractedLevel = levelExtractors.find(function (extractor) { return extractor.predicate(token); });\r\n        return extractedLevel\r\n            ? extractedLevel.level\r\n            : TokenValidateLevel.Fatal;\r\n    };\r\n    return TokenValidator;\r\n}());\n\nvar TokenEnumerable = /** @class */ (function () {\r\n    function TokenEnumerable(token) {\r\n        this.token = token;\r\n        this.tokenStack = [];\r\n        this.cursor = 0;\r\n        this._nextStack = {\r\n            line: 0,\r\n            col: 0\r\n        };\r\n    }\r\n    Object.defineProperty(TokenEnumerable.prototype, \"stack\", {\r\n        get: function () {\r\n            return this._stack || this._nextStack;\r\n        },\r\n        set: function (value) {\r\n            this._stack = this._nextStack;\r\n            this._nextStack = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TokenEnumerable.prototype.rewind = function () {\r\n        this.cursor = 0;\r\n        this.currentToken = undefined;\r\n        this._stack = undefined;\r\n        this._nextStack = {\r\n            col: 0,\r\n            line: 0\r\n        };\r\n        this.tokenStack = [];\r\n    };\r\n    TokenEnumerable.prototype.calculateStack = function (token) {\r\n        if (TokenHelper.isLineEscape(token)) {\r\n            this.stack = {\r\n                line: this._nextStack.line + 1,\r\n                col: 0\r\n            };\r\n            return;\r\n        }\r\n        this.stack = {\r\n            line: this._nextStack.line,\r\n            col: this._nextStack.col + 1\r\n        };\r\n    };\r\n    TokenEnumerable.prototype.finalizeStack = function () {\r\n        this.stack = undefined;\r\n    };\r\n    TokenEnumerable.prototype.addStack = function (token) {\r\n        this.tokenStack.push(token);\r\n    };\r\n    TokenEnumerable.prototype.popStack = function () {\r\n        return this.tokenStack.length\r\n            ? this.tokenStack[this.tokenStack.length - 1]\r\n            : undefined;\r\n    };\r\n    TokenEnumerable.prototype.next = function () {\r\n        var tokenStack = [];\r\n        if (this.cursor >= this.token.length)\r\n            return undefined;\r\n        do {\r\n            this.currentToken = this.findToken();\r\n            if (!TokenHelper.isUnkown(this.currentToken))\r\n                tokenStack.push(this.currentToken);\r\n        } while (this.proceedNext());\r\n        var token = this.makeToken(tokenStack);\r\n        var error = TokenValidator.validateToken(token);\r\n        if (error)\r\n            throw error;\r\n        return token;\r\n    };\r\n    TokenEnumerable.prototype.proceedNext = function () {\r\n        var token = this.currentToken;\r\n        var nextToken = this.token[this.cursor];\r\n        return this.isSequentialValue(token, nextToken);\r\n    };\r\n    TokenEnumerable.prototype.isSequentialValue = function (token, nextToken) {\r\n        var tokenType = TokenHelper.induceType(token);\r\n        var nextTokenType = TokenHelper.induceType(nextToken);\r\n        return tokenType === Token.Type.Value && TokenHelper.isNumeric(token) && tokenType === nextTokenType ||\r\n            tokenType === Token.Type.Value && TokenHelper.isNumeric(token) && nextTokenType === Token.Type.Dot ||\r\n            tokenType === Token.Type.Dot && TokenHelper.isNumeric(nextToken) && nextTokenType === Token.Type.Value;\r\n    };\r\n    TokenEnumerable.prototype.findToken = function () {\r\n        while (this.cursor < this.token.length) {\r\n            var token = this.token[this.cursor];\r\n            this.cursor += 1;\r\n            this.calculateStack(token);\r\n            if (!TokenHelper.isWhiteSpace(token))\r\n                return token;\r\n        }\r\n    };\r\n    TokenEnumerable.prototype.isTokenArrayNumeric = function (tokens) {\r\n        return tokens.every(function (token) { return TokenHelper.isNumeric(token) || TokenHelper.isDot(token); });\r\n    };\r\n    TokenEnumerable.prototype.makeToken = function (tokens) {\r\n        if (!tokens.length)\r\n            return undefined;\r\n        if (this.isTokenArrayNumeric(tokens))\r\n            return tokens.join('');\r\n        if (tokens.length > 1)\r\n            throw new ParserError(TokenError.invalidNonNumericValue, this.makeTokenString(tokens));\r\n        return tokens[0];\r\n    };\r\n    TokenEnumerable.prototype.makeTokenString = function (tokens) {\r\n        return tokens.map(function (token) { return typeof token === 'object' ? JSON.stringify(token) : token; }).join('');\r\n    };\r\n    return TokenEnumerable;\r\n}());\n\nvar GeneralError;\r\n(function (GeneralError) {\r\n    GeneralError.id = 0x1000;\r\n    GeneralError.unknownError = { code: 0x1000, text: 'unknown error is occurred' };\r\n    GeneralError.methodNotImplemented = { code: 0x1001, text: 'method not implemented' };\r\n})(GeneralError || (GeneralError = {}));\n\nvar TokenAnalyzer = /** @class */ (function (_super) {\r\n    __extends(TokenAnalyzer, _super);\r\n    function TokenAnalyzer(token) {\r\n        return _super.call(this, token) || this;\r\n    }\r\n    TokenAnalyzer.prototype.parse = function () {\r\n        var _this = this;\r\n        this.try(function () { return _this.preValidate(); });\r\n        this.initialize();\r\n        this.try(function () { return _this.makeAst(); });\r\n        this.try(function () { return _this.postValidate(); });\r\n        return this.ast;\r\n    };\r\n    TokenAnalyzer.prototype.initialize = function () {\r\n        this.ast = new AbstractSyntaxTree(Token.literal.BracketOpen);\r\n        this.ast.leftNode = new AbstractSyntaxTree();\r\n        this.currentTree = this.ast.leftNode;\r\n        this.rewind();\r\n    };\r\n    TokenAnalyzer.prototype.getAst = function () {\r\n        return this.ast;\r\n    };\r\n    TokenAnalyzer.prototype.makeAst = function () {\r\n        var _this = this;\r\n        var token;\r\n        while (token = this.next()) {\r\n            this.try(function () { return _this.doAnalyzeToken(token); });\r\n        }\r\n        this.finalizeStack();\r\n        this.ast = this.ast.removeRootBracket().findRoot();\r\n    };\r\n    TokenAnalyzer.prototype.try = function (tryFunction) {\r\n        try {\r\n            return tryFunction();\r\n        }\r\n        catch (error) {\r\n            this.handleError(error);\r\n        }\r\n    };\r\n    TokenAnalyzer.prototype.preValidate = function () {\r\n        if (!this.token || !this.token.length)\r\n            throw new ParserError(TokenError.emptyToken);\r\n    };\r\n    TokenAnalyzer.prototype.postValidate = function () {\r\n        if (this.ast.hasOpenBracket())\r\n            throw new ParserError(TokenError.missingCloseBracket);\r\n    };\r\n    TokenAnalyzer.prototype.handleError = function (error) {\r\n        if (error instanceof ParserError)\r\n            throw error.withStack(this.stack);\r\n        throw new ParserError(GeneralError.unknownError).withStack(this.stack);\r\n    };\r\n    TokenAnalyzer.prototype.doAnalyzeToken = function (token) {\r\n        this.analyzeToken(token);\r\n        this.addStack(token);\r\n    };\r\n    TokenAnalyzer.prototype.analyzeToken = function (token) {\r\n        var lastToken = this.popStack();\r\n        if (TokenHelper.isBracket(token)) {\r\n            this.analyzeBracketToken(token);\r\n            return;\r\n        }\r\n        if (TokenHelper.isOperator(token)) {\r\n            this.analyzeOperatorToken(token);\r\n            return;\r\n        }\r\n        var error = TokenValidator.validateValueToken(token, lastToken);\r\n        if (error)\r\n            throw error;\r\n        this.currentTree.insertNode(token);\r\n    };\r\n    TokenAnalyzer.prototype.analyzeBracketToken = function (token) {\r\n        var lastToken = this.popStack();\r\n        if (TokenHelper.isBracketOpen(token)) {\r\n            if (lastToken && !TokenHelper.isSymbol(lastToken))\r\n                this.insertImplicitMultiplication();\r\n            this.currentTree = this.currentTree.insertNode(token);\r\n            return;\r\n        }\r\n        if (TokenHelper.isBracketClose(token)) {\r\n            this.currentTree = this.currentTree.removeClosestBracket();\r\n            this.ast = this.currentTree.findRoot();\r\n            return;\r\n        }\r\n    };\r\n    TokenAnalyzer.prototype.analyzeOperatorToken = function (token) {\r\n        var lastToken = this.popStack();\r\n        if (TokenHelper.isOperator(lastToken))\r\n            throw new ParserError(TokenError.invalidTwoOperator, lastToken, token);\r\n        if (!this.currentTree.value)\r\n            this.currentTree.value = token;\r\n        else {\r\n            if (!TokenHelper.isBracket(this.currentTree.value) && !this.currentTree.rightNode)\r\n                throw new ParserError(TokenError.invalidTwoOperator, lastToken, token);\r\n            this.currentTree = this.currentTree.insertNode(token);\r\n            this.ast = this.ast.findRoot();\r\n        }\r\n    };\r\n    TokenAnalyzer.prototype.insertImplicitMultiplication = function () {\r\n        this.analyzeToken(Token.literal.Multiplication);\r\n        this.addStack(Token.literal.Multiplication);\r\n    };\r\n    return TokenAnalyzer;\r\n}(TokenEnumerable));\n\nvar ParserHelper = /** @class */ (function () {\r\n    function ParserHelper() {\r\n    }\r\n    ParserHelper.getArray = function (data) {\r\n        return typeof data === 'string'\r\n            ? this.stringToArray(data)\r\n            : data;\r\n    };\r\n    ParserHelper.stringToArray = function (value) {\r\n        return value.split('');\r\n    };\r\n    return ParserHelper;\r\n}());\n\nvar Parser = /** @class */ (function () {\r\n    function Parser() {\r\n    }\r\n    Parser.parse = function (data) {\r\n        var analyzer = new TokenAnalyzer(ParserHelper.getArray(data));\r\n        return analyzer.parse();\r\n    };\r\n    Parser.unparse = function (ast) {\r\n        return ast.expression;\r\n    };\r\n    return Parser;\r\n}());\n\nvar BuilderBase = /** @class */ (function () {\r\n    function BuilderBase(treeBuilder) {\r\n        this.treeBuilder = treeBuilder;\r\n    }\r\n    BuilderBase.prototype.build = function (data) {\r\n        var _this = this;\r\n        return this.try(function () { return _this.doBuild(data); });\r\n    };\r\n    BuilderBase.prototype.parse = function (data) {\r\n        var _this = this;\r\n        return this.try(function () { return _this.doParse(data); });\r\n    };\r\n    BuilderBase.prototype.unparse = function (data) {\r\n        var _this = this;\r\n        return this.try(function () { return _this.doUnparse(data); });\r\n    };\r\n    BuilderBase.prototype.handleError = function (error) {\r\n        return Packer.makeError(error);\r\n    };\r\n    BuilderBase.prototype.try = function (tryFunc) {\r\n        try {\r\n            return tryFunc();\r\n        }\r\n        catch (error) {\r\n            return this.handleError(error);\r\n        }\r\n    };\r\n    BuilderBase.prototype.doBuild = function (data) {\r\n        throw new ParserError(GeneralError.methodNotImplemented);\r\n    };\r\n    BuilderBase.prototype.doParse = function (data) {\r\n        throw new ParserError(GeneralError.methodNotImplemented);\r\n    };\r\n    BuilderBase.prototype.doUnparse = function (data) {\r\n        throw new ParserError(GeneralError.methodNotImplemented);\r\n    };\r\n    return BuilderBase;\r\n}());\n\nvar Builder = /** @class */ (function (_super) {\r\n    __extends(Builder, _super);\r\n    function Builder() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Builder.prototype.doBuild = function (data) {\r\n        if (!data)\r\n            throw new ParserError(BuilderError.emptyData);\r\n        if (BuilderHelper.needParse(data))\r\n            return this.parse(data);\r\n        if (BuilderHelper.needUnparse(data))\r\n            return this.unparse(data);\r\n    };\r\n    Builder.prototype.doParse = function (data) {\r\n        var ast = Parser.parse(data);\r\n        var tree = this.treeBuilder.makeTree(ast);\r\n        return Packer.makeData(tree);\r\n    };\r\n    Builder.prototype.doUnparse = function (data) {\r\n        var ast = this.treeBuilder.makeAst(data);\r\n        var expression = Parser.unparse(ast);\r\n        return Packer.makeData(expression);\r\n    };\r\n    return Builder;\r\n}(BuilderBase));\n\n/* tslint:disable:max-line-length */\r\nvar TreeError;\r\n(function (TreeError) {\r\n    TreeError.id = 0x0200;\r\n    TreeError.emptyAst = { code: 0x0200, text: 'AST is empty' };\r\n    TreeError.emptyTree = { code: 0x0201, text: 'tree is empty' };\r\n    TreeError.invalidParserTree = { code: 0x0220, text: 'invalid parser tree' };\r\n})(TreeError || (TreeError = {}));\r\n/* tslint:enable:max-line-length */\n\nvar TreeBuilderBase = /** @class */ (function () {\r\n    function TreeBuilderBase() {\r\n    }\r\n    TreeBuilderBase.prototype.makeTree = function (ast) {\r\n        throw new ParserError(GeneralError.methodNotImplemented);\r\n    };\r\n    TreeBuilderBase.prototype.makeAst = function (tree) {\r\n        throw new ParserError(GeneralError.methodNotImplemented);\r\n    };\r\n    return TreeBuilderBase;\r\n}());\n\nvar TreeBuilder = /** @class */ (function (_super) {\r\n    __extends(TreeBuilder, _super);\r\n    function TreeBuilder() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TreeBuilder.prototype.makeTree = function (ast) {\r\n        if (!ast)\r\n            throw new ParserError(TreeError.emptyAst);\r\n        var tree = this.makeNode(ast);\r\n        if (!TreeBuilder.isValid(tree))\r\n            throw new ParserError(TreeError.invalidParserTree);\r\n        return tree;\r\n    };\r\n    TreeBuilder.prototype.makeAst = function (tree) {\r\n        if (!tree)\r\n            throw new ParserError(TreeError.emptyTree);\r\n        var ast = this.makeAstNode(tree);\r\n        if (!ast.isValid())\r\n            throw new ParserError(TreeError.invalidParserTree);\r\n        return ast;\r\n    };\r\n    TreeBuilder.prototype.makeNode = function (node) {\r\n        if (!node)\r\n            return undefined;\r\n        return node.type === Token.Type.Operator\r\n            ? this.makeOperatorNode(node)\r\n            : this.makeValueNode(node);\r\n    };\r\n    TreeBuilder.prototype.makeOperatorNode = function (sourceNode) {\r\n        return {\r\n            operator: sourceNode.value,\r\n            operand1: this.makeNode(sourceNode.leftNode),\r\n            operand2: this.makeNode(sourceNode.rightNode)\r\n        };\r\n    };\r\n    TreeBuilder.prototype.makeValueNode = function (sourceNode) {\r\n        return {\r\n            value: this.makeOperandValue(sourceNode)\r\n        };\r\n    };\r\n    TreeBuilder.prototype.makeOperandValue = function (sourceNode) {\r\n        var type = TokenHelper.isObject(sourceNode.value)\r\n            ? 'item'\r\n            : 'unit';\r\n        return _a = {\r\n                type: type\r\n            }, _a[type] = sourceNode.value, _a;\r\n        var _a;\r\n    };\r\n    TreeBuilder.prototype.makeAstNode = function (node) {\r\n        if (!node)\r\n            return undefined;\r\n        if (TreeBuilder.isTree(node)) {\r\n            var tree = node;\r\n            var ast = new AbstractSyntaxTree(tree.operator);\r\n            ast.leftNode = this.makeAstNode(tree.operand1);\r\n            ast.rightNode = this.makeAstNode(tree.operand2);\r\n            return ast;\r\n        }\r\n        var operand = node;\r\n        return new AbstractSyntaxTree(TreeBuilder.getValue(operand));\r\n    };\r\n    TreeBuilder.isTree = function (node) {\r\n        return !!node.operator;\r\n    };\r\n    TreeBuilder.getValue = function (operand) {\r\n        if (!TreeBuilder.isValidOperand(operand))\r\n            throw new ParserError(TreeError.invalidParserTree);\r\n        return operand.value.type === 'item'\r\n            ? operand.value.item\r\n            : operand.value.unit;\r\n    };\r\n    TreeBuilder.isValid = function (node) {\r\n        var tree = node;\r\n        var operand = node;\r\n        return !!(tree.operator && tree.operand1 && tree.operand2) || operand.value !== undefined;\r\n    };\r\n    TreeBuilder.isValidOperand = function (operand) {\r\n        return operand && operand.value && operand.value.type && operand.value[operand.value.type] !== undefined;\r\n    };\r\n    return TreeBuilder;\r\n}(TreeBuilderBase));\n\nvar _MODULE_VERSION_ = '0.0.7';\r\nfunction getVersion() {\r\n    return _MODULE_VERSION_;\r\n}\r\nfunction convert(data) {\r\n    var builder = new Builder(new TreeBuilder());\r\n    return builder.build(data);\r\n}\r\nfunction valid(data) {\r\n    var builder = new Builder(new TreeBuilder());\r\n    return builder.build(data).code === success;\r\n}\n\nexport { getVersion, convert, valid };\n","export const specialCharacters = [')', '!', '@', '#', '$', '%', '^', '&', 'x', '('];\nexport const supportedCharacters = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 'x', '*', '/', '.', '+', '-', '%', '^', '(', ')'];\n","import { defaultOptions } from '../option.value';\nimport { ElementPosition, Position } from './ui.interface';\nimport { UIHelper } from './ui.helper';\nimport { Key } from '../key.enum';\nimport { Helper } from '../helper';\nimport { convert, valid } from 'metric-parser';\nimport { specialCharacters, supportedCharacters } from '../formulize.value';\nimport { Tree } from 'metric-parser/dist/types/tree/simple.tree/type';\nimport { FormulizeOptions } from '../../dist/types/formulize/option.interface';\n\nexport abstract class UIBase {\n    protected _elem: HTMLElement;\n    protected _options: FormulizeOptions = <FormulizeOptions>{ ...defaultOptions };\n    protected _position: Position = { x: 0, y: 0 };\n    protected dragged: boolean;\n    protected moved: boolean;\n    protected container: JQuery;\n    protected statusBox: JQuery;\n    protected textBox: JQuery;\n    protected cursor: JQuery;\n\n    protected get dragElem(): JQuery {\n        return this.container\n            .find(`.${this._options.id}-drag`);\n    }\n\n    protected get cursorIndex(): number {\n        return this.cursor\n            ? this.cursor.index()\n            : 0;\n    }\n\n    public constructor(elem: HTMLElement, options?: FormulizeOptions) {\n        this._elem = elem;\n        this._options = <FormulizeOptions>{ ...this._options, ...options };\n\n        this.container = $(this._elem);\n        this.container.addClass(`${this._options.id}-container`);\n        this.container.wrap(`<div class=\"${this._options.id}-wrapper\"></div>`);\n\n        this.statusBox = $(`<div class=\"${this._options.id}-alert\">${this._options.text.formula}</div>`);\n        this.statusBox.insertBefore(this.container);\n\n        this.textBox = $(`\n            <textarea\n              id=\"${this._options.id}-text\"\n              name=\"${this._options.id}-text\"\n              class=\"${this._options.id}-text\"\n                ></textarea>\n        `);\n        this.textBox.insertAfter(this.container);\n        this.textBox.trigger('focus');\n\n        this.attachEvents();\n    }\n\n    protected attachEvents() {\n        throw new Error('method not implemented');\n    }\n\n    protected analyzeKey<T>(keyCode: number, pressedCtrl: boolean, pressedShift: boolean): T {\n        throw new Error('method not implemented');\n    }\n\n    protected startDrag(position: Position): void {\n        this.dragged = true;\n        this.moved = false;\n        this._position = position;\n    }\n\n    protected endDrag(position: Position): void {\n        this.dragged = false;\n\n        if (this.moved) {\n            return;\n        }\n\n        this.moved = false;\n        this.pick(position);\n    }\n\n    private prevCursorIndex = 0;\n    protected moveDrag(position: Position): void {\n        if (!this.dragged)\n            return;\n\n        if (!UIHelper.isOverDistance(this._position, position, 5))\n            return;\n\n        this.moved = true;\n        this.removeDrag();\n\n        const cursorIndex = this.cursorIndex;\n        this.pick(position);\n        const positions = [this.prevCursorIndex, cursorIndex];\n        positions.sort();\n\n        const startPosition = positions[0];\n        const endPosition = positions[1];\n\n        if (startPosition === endPosition) {\n            this.prevCursorIndex = cursorIndex;\n            return;\n        }\n\n        const dragElem = $(UIHelper.getDragElement(this._options.id));\n        if (cursorIndex >= this.prevCursorIndex)\n            dragElem.insertBefore(this.cursor);\n        else\n            dragElem.insertAfter(this.cursor);\n\n        this.selectRange(startPosition, endPosition);\n        this.prevCursorIndex = cursorIndex;\n    }\n\n    protected setCursorValue(elem: HTMLElement, value: string) {\n        if (!value)\n            return;\n\n        $(elem).empty();\n        const decimalValue = Helper.toDecimal(value);\n        const split = decimalValue.split('.');\n        const prefix = $(`<span class=\"${this._options.id}-prefix ${this._options.id}-decimal-highlight\">${split[0]}</span>`);\n        prefix.appendTo($(elem));\n\n        if (!split[1])\n            return;\n\n        const suffix = $(`<span class=\"${this._options.id}-surfix ${this._options.id}-decimal-highlight\">.'${split[1]}</span>`);\n        suffix.appendTo($(elem));\n    }\n\n    public pick(position: Position = { x: 0, y: 0 }) {\n        this.removeCursor();\n        this.cursor = $(UIHelper.getCursorElement(this._options.id));\n        this.cursor.appendTo(this.container);\n\n        const closestUnitElem = this.findClosestUnit(position);\n        if (closestUnitElem)\n            this.cursor.insertAfter(closestUnitElem);\n        else\n            this.cursor.prependTo(this.container);\n\n        this.removeDrag();\n    }\n\n    private findClosestUnit(position: Position): HTMLElement {\n        const containerPosition = {\n            x: this.container.offset().left,\n            y: this.container.offset().top\n        };\n\n        const parentPadding: Position = {\n            x: Number(this.container.css('padding-left').replace(/[^\\d.]/gi, '')),\n            y: Number(this.container.css('padding-top').replace(/[^\\d.]/gi, ''))\n        };\n\n        const unitPositions: ElementPosition[] = this.container\n            .children(`*:not(\".${this._options.id}-cursor\")`)\n            .toArray()\n            .map(elem => ({\n                elem,\n                x: $(elem).offset().left - containerPosition.x + parentPadding.x,\n                y: $(elem).offset().top - containerPosition.y\n            }));\n\n        let maxY = 0;\n        const closestUnitPositions = unitPositions\n            .filter(unitPosition => unitPosition.x <= position.x)\n            .map(unitPosition => {\n                if (unitPosition.y < maxY * 0.5)\n                    return undefined;\n\n                const diffX = Math.abs(position.x - unitPosition.x);\n                const diffY = Math.abs(position.y - unitPosition.y);\n                return {\n                    ...unitPosition,\n                    diff: { x: diffX, y: diffY }\n                };\n            })\n            .filter(unitPosition => !!unitPosition);\n        const filteredUnitPositions = closestUnitPositions.filter(unitPosition => unitPosition.y === maxY).length\n            ? closestUnitPositions.filter(unitPosition => unitPosition.y === maxY)\n            : closestUnitPositions.filter(unitPosition => unitPosition.y <= position.y);\n        filteredUnitPositions.sort((a, b) => a.diff.x - b.diff.x || a.diff.y - b.diff.y);\n        const closestUnitPosition = filteredUnitPositions.shift();\n        return closestUnitPosition\n            ? closestUnitPosition.elem\n            : undefined;\n    }\n\n    protected selectRange(start: number, end: number): void {\n        if (!this.dragElem.length)\n            return;\n\n        this.container\n            .children(`:not(\".${this._options.id}-cursor\")`)\n            .filter(`:gt(\"${start}\")`)\n            .filter(`:lt(\"${end - start}\")`)\n            .add(this.container.children(`:not(\".${this._options.id}-cursor\")`).eq(start))\n            .toArray()\n            .forEach(elem => () => $(elem).appendTo(this.dragElem));\n    }\n\n    protected hookKeyDown(event: JQuery.Event<KeyboardEvent>): void {\n        event.preventDefault();\n\n        if (!this.cursor || !this.cursor.length)\n            return;\n\n        const keyCode = event.which >= Key.Numpad0 && event.which <= Key.Numpad9\n            ? event.which - Key.Zero\n            : event.which;\n\n        this.analyzeKey(keyCode, event.ctrlKey, event.shiftKey);\n\n        const key = Helper.getKeyCodeValue(keyCode, event.shiftKey);\n        const realKey = event.shiftKey && /[0-9]/.test(key) && specialCharacters[Number(key)]\n            ? specialCharacters[Number(key)]\n            : key;\n        this.insertKey(realKey);\n        this.validate();\n    }\n\n    protected hookUpdate(): void {\n        this.validate();\n        $(this._elem)\n            .triggerHandler(`${this._options.id}.input`, this.getData());\n    }\n\n    protected removeBefore(): void {\n        if (this.dragElem.length) {\n            this.cursor.insertBefore(this.dragElem);\n            this.dragElem.remove();\n            this.hookUpdate();\n            return;\n        }\n\n        const prevCursorElem = this.cursor.prev();\n        if (!this.cursor.length || !prevCursorElem.length)\n            return;\n\n        if (\n            prevCursorElem.hasClass(`${this._options.id}-unit`) &&\n            prevCursorElem.text().length > 1\n        ) {\n            const text = prevCursorElem.text();\n            this.setCursorValue(prevCursorElem.get(0), text.substring(0, text.length - 1));\n        } else\n            prevCursorElem.remove();\n\n        this.hookUpdate();\n    }\n\n    protected removeAfter(): void {\n        if (this.dragElem.length) {\n            this.cursor.insertAfter(this.dragElem);\n            this.dragElem.remove();\n            this.hookUpdate();\n            return;\n        }\n\n        const nextCursorElem = this.cursor.next();\n        if (!this.cursor.length || nextCursorElem.length)\n            return;\n\n        if (\n            nextCursorElem.hasClass(`${this._options.id}-unit`) &&\n            nextCursorElem.text().length > 1\n        ) {\n            const text = nextCursorElem.text();\n            this.setCursorValue(nextCursorElem.get(0), text.substring(1, text.length));\n        } else\n            nextCursorElem.remove();\n\n        this.hookUpdate();\n    }\n\n    protected removeCursor(): void {\n        this.container\n            .find(`.${this._options.id}-cursor`)\n            .remove();\n    }\n\n    protected removeUnit(): void {\n        this.container\n            .find(`:not(\".${this._options.id}-cursor\")`)\n            .remove();\n    }\n\n    private moveCursorBefore(elem: HTMLElement) {\n        if (!$(elem).length)\n            return;\n\n        this.cursor.insertBefore($(elem));\n    }\n\n    private moveCursorAfter(elem: HTMLElement) {\n        if (!$(elem).length)\n            return;\n\n        this.cursor.insertAfter($(elem));\n    }\n\n    protected moveLeftCursor(dragMode: boolean = false): void {\n        const prevCursorElem = this.cursor.prev();\n\n        if (!this.cursor.length || !prevCursorElem.length || !dragMode) {\n            this.removeDrag();\n            this.moveCursorBefore(prevCursorElem.get(0));\n            return;\n        }\n\n        if (!this.dragElem.length) {\n            const dragElem = $(UIHelper.getDragElement(this._options.id));\n            dragElem.insertBefore(this.cursor);\n            prevCursorElem.prependTo(this.dragElem);\n            return;\n        }\n\n        if (prevCursorElem.hasClass(`${this._options.id}-drag`)) {\n            const draggedUnit = this.dragElem.children();\n            if (!draggedUnit.length) {\n                this.dragElem.remove();\n                return;\n            }\n\n            draggedUnit.last().insertAfter(this.dragElem);\n            this.moveCursorAfter(this.dragElem.get(0));\n            return;\n        }\n    }\n\n    protected moveUpCursor(): void {\n        if (!this.cursor.length)\n            return;\n\n        this.pick({\n            x: this.cursor.position().left + this.cursor.outerWidth(),\n            y: this.cursor.position().top - this.cursor.outerHeight() / 2\n        });\n    }\n\n    protected moveRightCursor(dragMode: boolean = false): void {\n        const nextCursorElem = this.cursor.next();\n\n        if (!this.cursor.length || !nextCursorElem.length || !dragMode) {\n            this.removeDrag();\n            this.moveCursorAfter(nextCursorElem.get(0));\n            return;\n        }\n\n        if (!this.dragElem.length) {\n            const dragElem = $(UIHelper.getDragElement(this._options.id));\n            dragElem.insertBefore(this.cursor);\n            nextCursorElem.appendTo(this.dragElem);\n            return;\n        }\n\n        if (nextCursorElem.hasClass(`${this._options.id}-drag`)) {\n            const draggedUnit = this.dragElem.children();\n            if (!draggedUnit.length) {\n                this.dragElem.remove();\n                return;\n            }\n\n            draggedUnit.first().insertBefore(this.dragElem)\n            this.moveCursorBefore(this.dragElem.get(0));\n            return;\n        }\n\n    }\n\n    protected moveDownCursor(): void {\n        if (!this.cursor.length)\n            return;\n\n        this.pick({\n            x: this.cursor.position().left + this.cursor.outerWidth(),\n            y: this.cursor.position().top + this.cursor.outerHeight() * 1.5\n        });\n    }\n\n    protected moveFirstCursor(dragMode: boolean = false): void {\n        const firstCursorElem = this.container.children(':first');\n        if (!this.cursor.length || !firstCursorElem.length || !dragMode) {\n            this.removeDrag();\n            this.moveCursorBefore(firstCursorElem.get(0));\n            return;\n        }\n\n        if (!this.dragElem.length) {\n            const dragElem = $(UIHelper.getDragElement(this._options.id));\n            dragElem.insertAfter(this.cursor);\n        }\n\n        this.cursor\n            .prevAll()\n            .toArray()\n            .forEach(elem => $(elem).prependTo(this.dragElem));\n    }\n\n    protected moveLastCursor(dragMode: boolean = false): void {\n        const lastCursorElem = this.container.children(':last');\n        if (!this.cursor.length || !lastCursorElem.length || !dragMode) {\n            this.removeDrag();\n            this.moveCursorAfter(lastCursorElem.get(0));\n            return;\n        }\n\n        if (!this.dragElem.length) {\n            const dragElem = $(UIHelper.getDragElement(this._options.id));\n            dragElem.insertBefore(this.cursor);\n        }\n\n        this.cursor\n            .nextAll()\n            .appendTo(this.dragElem);\n    }\n\n    public clear() {\n        this.removeCursor();\n        this.removeUnit();\n        this.hookUpdate();\n    }\n\n    public blur() {\n        if (!this.cursor)\n            return;\n\n        this.cursor.remove();\n        this.removeDrag();\n    }\n\n    public removeDrag() {\n        this.dragElem\n            .children('*')\n            .toArray()\n            .forEach(elem => $(elem).insertBefore(this.dragElem));\n        this.dragElem.remove();\n        this.hookUpdate();\n    }\n\n    public selectAll() {\n        this.removeDrag();\n        const dragElem = $(UIHelper.getDragElement(this._options.id));\n        dragElem.prependTo(this.container);\n        this.container\n            .children(`:not(\".${this._options.id}-cursor\")`)\n            .toArray()\n            .forEach(elem => $(elem).appendTo(dragElem));\n    }\n\n    public validate(extractor?: (valid: boolean) => void) {\n        const data = this.getData();\n\n        if (!data)\n            return;\n\n        const isValid = valid(data);\n        console.log('isValid', isValid, this.statusBox, this._options);\n        if (isValid) {\n            this.statusBox\n                .text(this._options.text.pass)\n                .addClass(`${this._options.id}-alert-good`)\n                .removeClass(`${this._options.id}-alert-error`);\n        }\n        else {\n            this.statusBox\n                .text(this._options.text.error)\n                .removeClass(`${this._options.id}-alert-good`)\n                .addClass(`${this._options.id}-alert-error`);\n        }\n\n        if (extractor)\n            extractor(isValid);\n    }\n\n    protected isValidKey(key: string): boolean {\n        return this.isNumberTokenKey(key) || supportedCharacters.includes(key);\n    }\n\n    protected isNumberTokenKey(key: string): boolean {\n        return /[0-9]/.test(key) || key === '.';\n    }\n\n    private getExpression(): string[] {\n        return this.container\n            .find('.ui-item')\n            .toArray()\n            .map(elem => UIHelper.getDataValue(elem));\n    }\n\n    public setData(data: Tree): void {\n        this.clear();\n        const result = convert(data);\n        if (!result.code)\n            this.insertData(result.data);\n    }\n\n    public getData(extractor?: (data: Tree) => void): Tree {\n        const expression = this.getExpression();\n        console.log('expression', expression);\n        const result = convert(expression);\n\n        if (extractor)\n            extractor(result.data);\n\n        return result.data;\n    }\n\n    public insert(obj: string | number | HTMLElement, position?: Position) {\n        if (!obj)\n            return;\n\n        if (!this.cursor || !this.cursor.length || position)\n            this.pick(position);\n\n        if (typeof obj === 'string' || typeof obj === 'number') {\n            this.insertKey(<string>obj);\n            return;\n        }\n\n        if (!(obj instanceof HTMLElement))\n            return;\n\n        $(obj).addClass(`${this._options.id}-item`);\n        $(obj).insertBefore(this.cursor);\n\n        this.hookUpdate();\n    }\n\n    public insertKey(key: string): void {\n        if (!this.isValidKey(key))\n            return;\n\n        if (this.isNumberTokenKey(key)) {\n            const unitElem = $(`<div class=\"${this._options.id}-item ${this._options.id}-unit\">${key}</div>`);\n\n            if (this.dragElem.length) {\n                this.cursor.insertBefore(this.dragElem);\n                this.dragElem.remove();\n            }\n\n            if (this.cursor && this.cursor.length)\n                this.cursor.before(unitElem);\n            else\n                this.container.append(unitElem);\n\n            const prevUnitElem = unitElem.prevUntil(`:not(.${this._options.id}-cursor)`);\n            const nextUnitElem = unitElem.nextUntil(`:not(.${this._options.id}-cursor)`);\n\n            const targetUnitElem = [prevUnitElem, nextUnitElem]\n                .find(elem => elem.length && elem.hasClass(`${this._options.id}-unit`));\n\n            if (!targetUnitElem)\n                return;\n\n            if (targetUnitElem === prevUnitElem)\n                targetUnitElem.append(unitElem[0].innerHTML);\n\n            if (targetUnitElem === nextUnitElem)\n                targetUnitElem.prepend(unitElem[0].innerHTML);\n\n            const text = targetUnitElem.text();\n            this.setCursorValue(targetUnitElem.get(0), text);\n            unitElem.remove();\n\n            this.hookUpdate();\n            return;\n        }\n\n        if (!key)\n            return;\n\n        const operatorElem = $(`<div class=\"${this._options.id}-item ${this._options.id}-operator\">${key.toLowerCase()}</div>`);\n\n        if (this.cursor && this.cursor.length)\n            this.cursor.before(operatorElem);\n        else\n            this.container.append(operatorElem);\n\n        if (key === '(' || key === ')')\n            operatorElem.addClass(`${this._options.id}-bracket`);\n    }\n\n    public insertData(data: string | string[] | any[]) {\n        const arrayData = typeof data === 'string'\n            ? data.split('')\n            : data;\n\n        arrayData\n            .forEach(value => {\n                const inputValue = typeof value === 'string' || !this._options.import\n                    ? value\n                    : this._options.import(value);\n                this.insert(inputValue);\n            });\n        this.hookUpdate();\n    }\n}\n","import { FormulizeKeyHelper } from '../key.helper';\nimport { UIBase } from './ui.base';\nimport { Behavior } from './ui.interface';\n\nexport class UI extends UIBase {\n    protected analyzeKey<T>(keyCode: number, pressedCtrl: boolean, pressedShift: boolean): T {\n        const behaviors: Behavior[] = [\n            { predicate: FormulizeKeyHelper.isReload, doBehavior: FormulizeKeyHelper.doReload },\n            { predicate: FormulizeKeyHelper.isSelectAll, doBehavior: FormulizeKeyHelper.doAction(() => this.selectAll()) },\n            { predicate: FormulizeKeyHelper.isBackspace, doBehavior: FormulizeKeyHelper.doAction(() => this.removeBefore()) },\n            { predicate: FormulizeKeyHelper.isDelete, doBehavior: FormulizeKeyHelper.doAction(() => this.removeAfter()) },\n            { predicate: FormulizeKeyHelper.isLeft, doBehavior: FormulizeKeyHelper.doAction(() => this.moveLeftCursor(pressedShift)) },\n            { predicate: FormulizeKeyHelper.isUp, doBehavior: FormulizeKeyHelper.doAction(() => this.moveUpCursor()) },\n            { predicate: FormulizeKeyHelper.isRight, doBehavior: FormulizeKeyHelper.doAction(() => this.moveRightCursor(pressedShift)) },\n            { predicate: FormulizeKeyHelper.isDown, doBehavior: FormulizeKeyHelper.doAction(() => this.moveDownCursor()) },\n            { predicate: FormulizeKeyHelper.isHome, doBehavior: FormulizeKeyHelper.doAction(() => this.moveFirstCursor(pressedShift)) },\n            { predicate: FormulizeKeyHelper.isEnd, doBehavior: FormulizeKeyHelper.doAction(() => this.moveLastCursor(pressedShift)) }\n        ];\n        const behavior = behaviors.find(behavior => behavior.predicate(keyCode, pressedCtrl, pressedShift));\n        if (behavior)\n            return behavior.doBehavior();\n    }\n\n    protected attachEvents(): void {\n        this.textBox\n            .off('blur')\n            .on('blur', () => this.blur());\n\n        this.textBox\n            .off(`dblclick.${this._options.id}Handler`)\n            .on(`dblclick.${this._options.id}Handler`, this.selectAll);\n\n        this.textBox\n            .off(`mousedown.${this._options.id}Handler`)\n            .on(`mousedown.${this._options.id}Handler`,\n                event => this.startDrag({ x: event.offsetX, y: event.offsetY }));\n\n        this.textBox\n            .off(`mouseup.${this._options.id}Handler`)\n            .on(`mouseup.${this._options.id}Handler`,\n                event => this.endDrag({ x: event.offsetX, y: event.offsetY }));\n\n        this.textBox\n            .off(`mousemove.${this._options.id}Handler`)\n            .on(`mousemove.${this._options.id}Handler`,\n                event => this.moveDrag({ x: event.offsetX, y: event.offsetY }));\n\n        this.textBox\n            .off(`keydown.${this._options.id}Handler`)\n            .on(`keydown.${this._options.id}Handler`,\n                (event: any) => {\n                    this.hookKeyDown(event);\n                });\n    }\n}\n","import '../style/formulize.scss';\nimport { FormulizeFunction, FormulizeOptions } from './formulize.interface';\nimport { defaultOptions } from './option.value';\nimport { UI } from './ui/ui';\n\nconst _MODULE_VERSION_ = '0.0.1';\n\nexport * from './ui/ui';\n\nexport function getVersion(): string {\n    return _MODULE_VERSION_;\n}\n\n$.fn.formulize = Object.assign<FormulizeFunction, FormulizeOptions>(\n    function (this: JQuery, options: FormulizeOptions): JQuery {\n        this\n            .toArray()\n            .forEach(elem =>  {\n                new UI(elem, options)\n            });\n        return this;\n    },\n    <FormulizeOptions>{ ...defaultOptions }\n);\n"],"names":["extendStatics","__extends","__assign","tslib_1.__assign","tslib_1.__extends","_MODULE_VERSION_"],"mappings":"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"}